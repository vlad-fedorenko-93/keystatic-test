---
import Layout from "../layouts/Layout.astro";
import Image from "astro/components/Image.astro";
import CaseStudyItem from "../components/CaseStudyItem.svelte";
import { getCollection } from "astro:content";
import type { ImageMetadata } from "astro";

const thumbnails = import.meta.glob<{ default: ImageMetadata }>("../assets/thumbnails/portfolio/**/thumbnail.avif", { eager: true })

const portfolio = await getCollection("portfolio");

---

<Layout title="Portfolio">
  <section class="m-auto w-3/5 pt-40 pb-0">
    <h1 class="text-7xl font-bold text-center mb-8">Portfolio</h1>
  </section>
  <section class="m-auto w-3/5 py-20">
    <div class="grid grid-cols-2 auto-rows-fr gap-4">
      {
        portfolio.map((caseStudy) => (
          <CaseStudyItem
            title={caseStudy.data.title}
            slug={`/portfolio/${caseStudy.slug}`}
            description={caseStudy.data.description}
          >
            <Image src={thumbnails[`../assets/thumbnails/portfolio/${caseStudy.slug}/thumbnail.avif`].default} alt={caseStudy.data.title} width={600}/>
          </CaseStudyItem>
        ))
      }
    </div>
  </section>
</Layout>